<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>pie</title>
        <style type="text/css">
            .chart {
                width: 100%;
                max-width: 300px;
            }
        </style>
    </head>

    <body>
        <p>{{return}}</p>
        <p>{{risk}}</p>
        <p>{{sharpe}}</p>
        <div class="chart">
            <canvas id="stocksPie"></canvas>
        </div>

        <div class="chart">
            <canvas id="sectorsPie"></canvas>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>  

        <script>
            var vals = JSON.parse("{{vals}}");
            var keys = Array.from("{{keys}}".replaceAll("&#39;", "").replaceAll("[", "").replaceAll("]", "").split(","));
            console.log(keys);

            // Data setup
            const stocks_data = {
                labels: keys,
                datasets: [{
                    label: '% of Portfolio',
                    data: vals,
                    borderWidth: 1
                }] 
            };

            // Chart config
            const stocks_config = {
                type: 'pie',
                data: stocks_data,
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            };

            // Render chart
            const stocksPie = new Chart(
                document.getElementById('stocksPie'),
                stocks_config
            );
        </script>    

    </body>
</html>